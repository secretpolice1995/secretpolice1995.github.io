---
title: 分布式系统·作业六
categories: 分布式系统
---
> 对以下每个应用程序，你认为最多一次语义和最少一次语义哪个更好？
>
> 1. 从文件服务器上读写文件；
> 2. 编译一个程序；
> 3. 远程银行；

1. 从文件服务器上读写文件：至少一次。对文件读写要保证其可靠性。
2. 编译程序：至少一次。要编译文件的时候消息至少要被传送一次保证编译结果；多次编译其实影响不大。
3. 远程银行：至多一次。比如，最多只能发出一次扣款消息，如果不成功，可以让客户重新发出扣款请求。不能在分布式系统内部作出扣款一次以上的动作，会带来负面影响（客户钞票多扣了）。

> 简述Flooding、PAXOS、RAFT、PBFT、PoW的使用场景？

1. Flooding（洪泛）洪泛算法简单可靠，当网络的通信流量很小时，可使分组的传送时延最小。当某个节点收到一个不是发给它的分组时，就将该分组转发到所有与该节点相连的链路并且不是消息来源的节点上，直到数据传送至目标节点或者数据设定的生存期限（TTL）为0为止。在许多条并行发送的路由中，显然会有一条是最佳的。洪泛不要求维护网络的拓扑结构和相关的路由计算，仅要求接收到信息的节点以广播方式转发数据包。
2. Paxos 算法解决的问题是一个分布式系统如何就某个值（决议）达成一致。一个典型的场景是，在一个分布式数据库系统中，如果各节点的初始状态一致，每个节点执行相同的操作序列，那么他们最后能得到一个一致的状态。为保证每个节点执行相同的命令序列，需要在每一条指令上执行一个“一致性算法”以保证每个节点看到的指令一致。
3. Raft最初是一个用于管理复制日志的共识算法，它是一个为真实世界应用建立的协议，主要注重协议的落地性和可理解性。Raft是在非拜占庭故障下达成共识的强一致协议。Raft 算法不论出于教学目的还是作为实践项目的基础都是要比 Paxos 或者其他一致性算法要优异的。它比其他算法更加简单，更加容易理解；它的算法描述足以实现一个现实的系统；它有好多开源的实现并且在很多公司里使用；它的安全性已经被证明；它的效率和其他算法比起来也不相上下。（来自于[Github上Raft算法的翻译](https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md)）
4. PBFT（实用拜占庭容错系统）降低了拜占庭协议的运行复杂度，从指数级别降低到多项式级别（Polynomial），使拜占庭协议在分布式系统中应用成为可能。拜占庭假设是对现实世界的模型化，由于硬件错误、网络拥塞或中断以及遭到恶意攻击等原因，计算机和网络可能出现不可预料的行为。拜占庭容错技术被设计用来处理这些异常行为，并满足所要解决的问题的规范要求。共识算法的核心是在正常的节点间形成对网络状态的共识。
5. PoW（Proof of Work，工作量证明）：去中心化账本系统。每个加入这个系统的节点都要保存一份完整的账本，但每个节点却不能同时记账，因为节点处于不同的环境，接收到不同的信息，如果同时记账的话，必然会导致账本的不一致，造成混乱。因此，需要有共识来达成哪个节点有权记账。比特币区块链通过竞争记账的方式解决去中心化的记账系统的一致性问题，即以每个节点的计算能力即“算力”来竞争记账权的机制。

> 任意选择一种编程语言实现的RAFT程序，运行该程序并测试记录结果。
>
> - <https://github.com/logcabin/logcabin>
> - <https://github.com/streed/simpleRaft>

选择了后者（Python实现的Raft算法）。在终端中依次输入如下指令，从Repo中获取源代码并下载依赖包：

```bash
git clone https://github.com/streed/simpleRaft
cd simpleRaft
python2 -m pip install -r requirements.txt
```

发现他是用nose写的项目测试，运行一下康康。~~这就行了？？？~~

```bash
$ nosetests
....................
----------------------------------------------------------------------
Ran 20 tests in 0.011s

OK
```

~~当然不行，待继续研究~~
